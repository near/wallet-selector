"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[1596],{51596:(U,W,t)=>{t.d(W,{q:()=>E});var c=t(49671),p=t(59450),k=t(46284),K=t(29415),T=t(74439),g=t(23979),x=t(28171),D=t(92356),L=t(22465),f=t(5274),h=t(54752);function E(b){const S=new Map,r=b.features??{defaultConnected:!1};let A,l=r.defaultConnected;return(0,h.K)(y=>({id:"mock",name:"Mock Connector",type:E.type,setup:()=>(0,c.Z)(function*(){A=y.chains[0].id})(),connect({chainId:n}={}){var e=this;return(0,c.Z)(function*(){if(r.connectError)throw"boolean"==typeof r.connectError?new p.ab(new Error("Failed to connect.")):r.connectError;const d=yield(yield e.getProvider()).request({method:"eth_requestAccounts"});let O=yield e.getChainId();return n&&O!==n&&(O=(yield e.switchChain({chainId:n})).id),l=!0,{accounts:d.map(u=>(0,k.K)(u)),chainId:O}})()},disconnect:()=>(0,c.Z)(function*(){l=!1})(),getAccounts(){var n=this;return(0,c.Z)(function*(){if(!l)throw new f.aH;return(yield(yield n.getProvider()).request({method:"eth_accounts"})).map(d=>(0,k.K)(d))})()},getChainId(){var n=this;return(0,c.Z)(function*(){const v=yield(yield n.getProvider()).request({method:"eth_chainId"});return(0,K.H_)(v,"number")})()},isAuthorized(){var n=this;return(0,c.Z)(function*(){return!(!r.reconnect||!l)&&!!(yield n.getAccounts()).length})()},switchChain({chainId:n}){var e=this;return(0,c.Z)(function*(){const v=yield e.getProvider(),d=y.chains.find(O=>O.id===n);if(!d)throw new p.x3(new f.X4);return yield v.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,T.eC)(n)}]}),d})()},onAccountsChanged(n){0===n.length?this.onDisconnect():y.emitter.emit("change",{accounts:n.map(e=>(0,k.K)(e))})},onChainChanged(n){const e=Number(n);y.emitter.emit("change",{chainId:e})},onDisconnect:n=>(0,c.Z)(function*(){y.emitter.emit("disconnect"),l=!1})(),getProvider({chainId:n}={}){var e=this;return(0,c.Z)(function*(){const d=(y.chains.find(u=>u.id===n)??y.chains[0]).rpcUrls.default.http[0],O=function(){var u=(0,c.Z)(function*({method:o,params:s}){if("eth_chainId"===o)return(0,T.eC)(A);if("eth_requestAccounts"===o)return b.accounts;if("eth_signTypedData_v4"===o&&r.signTypedDataError)throw"boolean"==typeof r.signTypedDataError?new p.ab(new Error("Failed to sign typed data.")):r.signTypedDataError;if("wallet_switchEthereumChain"===o){if(r.switchChainError)throw"boolean"==typeof r.switchChainError?new p.ab(new Error("Failed to switch chain.")):r.switchChainError;return A=(0,K.H_)(s[0].chainId,"number"),void e.onChainChanged(A.toString())}if("wallet_watchAsset"===o){if(r.watchAssetError)throw"boolean"==typeof r.watchAssetError?new p.ab(new Error("Failed to switch chain.")):r.watchAssetError;return l}if("wallet_getCapabilities"===o)return{"0x2105":{paymasterService:{supported:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"===s[0]},sessionKeys:{supported:!0}},"0x14A34":{paymasterService:{supported:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"===s[0]}}};if("wallet_sendCalls"===o){const m=[],Z=s[0].calls;for(const _ of Z){const{result:i,error:a}=yield L.f.http(d,{body:{method:"eth_sendTransaction",params:[_]}});if(a)throw new g.bs({body:{method:o,params:s},error:a,url:d});m.push(i)}const I=(0,x.w)((0,T.$G)(JSON.stringify(Z)));return S.set(I,m),{id:I}}if("wallet_getCallsStatus"===o){const m=S.get(s[0]);if(!m)return{atomic:!1,chainId:"0x1",id:s[0],status:100,receipts:[],version:"2.0.0"};const I=(yield Promise.all(m.map(function(){var _=(0,c.Z)(function*(i){const{result:a,error:C}=yield L.f.http(d,{body:{method:"eth_getTransactionReceipt",params:[i],id:0}});if(C)throw new g.bs({body:{method:o,params:s},error:C,url:d});return a?{blockHash:a.blockHash,blockNumber:a.blockNumber,gasUsed:a.gasUsed,logs:a.logs,status:a.status,transactionHash:a.transactionHash}:null});return function(i){return _.apply(this,arguments)}}()))).filter(_=>null!==_);return 0===I.length?{atomic:!1,chainId:"0x1",id:s[0],status:100,receipts:[],version:"2.0.0"}:{atomic:!1,chainId:"0x1",id:s[0],status:200,receipts:I,version:"2.0.0"}}if("wallet_showCallsStatus"===o)return;if("personal_sign"===o){if(r.signMessageError)throw"boolean"==typeof r.signMessageError?new p.ab(new Error("Failed to sign message.")):r.signMessageError;o="eth_sign",s=[s[1],s[0]]}const w={method:o,params:s},{error:M,result:R}=yield L.f.http(d,{body:w});if(M)throw new g.bs({body:w,error:M,url:d});return R});return function(s){return u.apply(this,arguments)}}();return(0,D.P)({request:O})({retryCount:0})})()}}))}E.type="mock"},22465:(U,W,t)=>{t.d(W,{f:()=>L,h:()=>x});var c=t(49671),p=t(67654),k=t(60997);function g(){return(g=(0,c.Z)(function*(f,{body:h,timeout:E=1e4}){return f.requestAsync({body:h,timeout:E})})).apply(this,arguments)}function x(f){return D.apply(this,arguments)}function D(){return(D=(0,c.Z)(function*(f){const h=yield(0,k.H)(f);return Object.assign(h.socket,{requests:h.requests,subscriptions:h.subscriptions})})).apply(this,arguments)}const L={http:(f,h)=>(0,p.x)(f).request(h),webSocket:function K(f,{body:h,onError:E,onResponse:b}){return f.request({body:h,onError:E,onResponse:b}),f},webSocketAsync:function T(f,h){return g.apply(this,arguments)}}},60997:(U,W,t)=>{t.d(W,{H:()=>L});var c=t(49671),p=t(23979),k=t(87447),K=t(52215),T=t(37);const g=new Map;function D(){return D=(0,c.Z)(function*(h){const{getSocket:E,keepAlive:b=!0,key:S="socket",reconnect:r=!0,url:l}=h,{interval:A=3e4}="object"==typeof b?b:{},{attempts:y=5,delay:n=2e3}="object"==typeof r?r:{};let e=g.get(`${S}:${l}`);if(e)return e;let v=0;const{schedule:d}=(0,k.S)({id:`${S}:${l}`,fn:(o=(0,c.Z)(function*(){const s=new Map,w=new Map;let M,R,m;function Z(){return I.apply(this,arguments)}function I(){return(I=(0,c.Z)(function*(){const _=yield E({onClose(){for(const i of s.values())i.onError?.(new p.Cc({url:l}));for(const i of w.values())i.onError?.(new p.Cc({url:l}));r&&v<y?setTimeout((0,c.Z)(function*(){v++,yield Z().catch(console.error)}),n):(s.clear(),w.clear())},onError(i){M=i;for(const a of s.values())a.onError?.(M);for(const a of w.values())a.onError?.(M);e?.close(),r&&v<y?setTimeout((0,c.Z)(function*(){v++,yield Z().catch(console.error)}),n):(s.clear(),w.clear())},onOpen(){M=void 0,v=0},onResponse(i){const a="eth_subscription"===i.method,C=a?i.params.subscription:i.id,B=a?w:s,P=B.get(C);P&&P.onResponse(i),a||B.delete(C)}});return R=_,b&&(m&&clearInterval(m),m=setInterval(()=>R.ping?.(),A)),_})).apply(this,arguments)}return yield Z(),M=void 0,e={close(){m&&clearInterval(m),R.close(),g.delete(`${S}:${l}`)},get socket(){return R},request({body:_,onError:i,onResponse:a}){M&&i&&i(M);const C=_.id??T.d.take(),B=P=>{"number"==typeof P.id&&C!==P.id||("eth_subscribe"===_.method&&"string"==typeof P.result&&w.set(P.result,{onResponse:B,onError:i}),"eth_unsubscribe"===_.method&&w.delete(_.params?.[0]),a(P))};s.set(C,{onResponse:B,onError:i});try{R.request({body:{jsonrpc:"2.0",id:C,..._}})}catch(P){i?.(P)}},requestAsync({body:_,timeout:i=1e4}){return(0,K.F)(()=>new Promise((a,C)=>this.request({body:_,onError:C,onResponse:a})),{errorInstance:new p.W5({body:_,url:l}),timeout:i})},requests:s,subscriptions:w,url:l},g.set(`${S}:${l}`,e),[e]}),function(){return o.apply(this,arguments)})}),[O,[u]]=yield d();var o;return u}),D.apply(this,arguments)}function L(h){return f.apply(this,arguments)}function f(){return f=(0,c.Z)(function*(h,E={}){const{keepAlive:b,reconnect:S}=E;return function x(h){return D.apply(this,arguments)}({getSocket:({onClose:r,onError:l,onOpen:A,onResponse:y})=>(0,c.Z)(function*(){const n=yield t.e(6561).then(t.bind(t,16561)).then(u=>u.WebSocket),e=new n(h);function v(){e.removeEventListener("close",v),e.removeEventListener("message",d),e.removeEventListener("error",l),e.removeEventListener("open",A),r()}function d({data:u}){try{const o=JSON.parse(u);y(o)}catch(o){l(o)}}e.addEventListener("close",v),e.addEventListener("message",d),e.addEventListener("error",l),e.addEventListener("open",A),e.readyState===n.CONNECTING&&(yield new Promise((u,o)=>{e&&(e.onopen=u,e.onerror=o)}));const{close:O}=e;return Object.assign(e,{close(){O.bind(e)(),v()},ping(){try{if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new p.c9({url:e.url,cause:new p.Cc({url:e.url})});const u={jsonrpc:"2.0",method:"net_version",params:[]};e.send(JSON.stringify(u))}catch(u){l(u)}},request({body:u}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new p.c9({body:u,url:e.url,cause:new p.Cc({url:e.url})});return e.send(JSON.stringify(u))}})})(),keepAlive:b,reconnect:S,url:h})}),f.apply(this,arguments)}}}]);