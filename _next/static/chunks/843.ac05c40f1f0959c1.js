(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{96279:function(e,t,r){var s="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=s.DOMException}return e.prototype=s,new e}();(function(e){var t=void 0!==n&&n||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},s={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(s.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(s.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(s.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;s.arrayBuffer&&s.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return u(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(s.blob)return this.blob().then(p);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,s,n,i=u(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),n=(s=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?s[1]:"utf-8",t.readAsText(e,n),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),s=0;s<t.length;s++)r[s]=String.fromCharCode(t[s]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},s.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=a(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=h(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},s.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function g(e,r){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var s,n,i=(r=r||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new l(r.headers)),this.method=(n=(s=r.method||this.method||"GET").toUpperCase(),m.indexOf(n)>-1?n:s),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),s=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(n))}}),t}function _(e,t){if(!(this instanceof _))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},y.call(g.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var v=[301,302,303,307,308];_.redirect=function(e,t){if(-1===v.indexOf(t))throw RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function w(r,n){return new Promise(function(i,o){var c=new g(r,n);if(c.signal&&c.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function f(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),s=r.shift().trim();if(s){var n=r.join(":").trim();try{t.append(s,n)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var s="response"in u?u.response:u.responseText;setTimeout(function(){i(new _(s,r))},0)},u.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},u.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(s.blob?u.responseType="blob":s.arrayBuffer&&(u.responseType="arraybuffer")),n&&"object"==typeof n.headers&&!(n.headers instanceof l||t.Headers&&n.headers instanceof t.Headers)){var p=[];Object.getOwnPropertyNames(n.headers).forEach(function(e){p.push(a(e)),u.setRequestHeader(e,h(n.headers[e]))}),c.headers.forEach(function(e,t){-1===p.indexOf(t)&&u.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){u.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",f),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",f)}),u.send(void 0===c._bodyInit?null:c._bodyInit)})}w.polyfill=!0,t.fetch||(t.fetch=w,t.Headers=l,t.Request=g,t.Response=_),e.Headers=l,e.Request=g,e.Response=_,e.fetch=w})({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=s.fetch?s:n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},25130:function(e,t,r){let s;var n=r(34406);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(s=!1,()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(87123)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},87123:function(e,t,r){e.exports=function(e){function t(e){let r,n,i;let o=null;function a(...e){if(!a.enabled)return;let s=a,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";o++;let i=t.formatters[n];if("function"==typeof i){let t=e[o];r=i.call(s,t),e.splice(o,1),o--}return r}),t.formatArgs.call(s,e);let h=s.log||t.log;h.apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){let s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e,t){let r=0,s=0,n=-1,i=0;for(;r<e.length;)if(s<t.length&&(t[s]===e[r]||"*"===t[s]))"*"===t[s]?(n=s,i=r,s++):(r++,s++);else{if(-1===n)return!1;s=n+1,r=++i}for(;s<t.length&&"*"===t[s];)s++;return s===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(let r of t.skips)if(n(e,r))return!1;for(let r of t.names)if(n(e,r))return!0;return!1},t.humanize=r(11378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},91355:function(e,t,r){var s,n=r(34406);!function(i){var o=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},h="object"==typeof n&&"function"==typeof n.nextTick,c="function"==typeof Symbol,l="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,f=c?l&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function p(){this._events={},this._conf&&d.call(this,this._conf)}function d(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),i!==e.maxListeners&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function y(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),void 0!==n&&n.emitWarning){var s=Error(r);s.name="MaxListenersExceededWarning",s.emitter=this,s.count=e,n.emitWarning(s)}else console.error(r),console.trace&&console.trace()}var m=function(e,t,r){var s=arguments.length;switch(s){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,r];default:for(var n=Array(s);s--;)n[s]=arguments[s];return n}};function g(e,t){for(var r={},s=e.length,n=t?t.length:0,o=0;o<s;o++)r[e[o]]=o<n?t[o]:i;return r}function b(e,t,r){if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(s=r.on,n=r.off),t.addEventListener?(s=t.addEventListener,n=t.removeEventListener):t.addListener?(s=t.addListener,n=t.removeListener):t.on&&(s=t.on,n=t.off),!s&&!n)throw Error("target does not implement any known event API");if("function"!=typeof s)throw TypeError("on method must be a function");if("function"!=typeof n)throw TypeError("off method must be a function");this._on=s,this._off=n;var s,n,i=e._observers;i?i.push(this):e._observers=[this]}function _(e,t,r,s){var n,a,h,c=Object.assign({},t);if(!e)return c;if("object"!=typeof e)throw TypeError("options must be an object");var l=Object.keys(e),u=l.length;function f(e){throw Error('Invalid "'+n+'" option value'+(e?". Reason: "+e:""))}for(var p=0;p<u;p++){if(n=l[p],!s&&!o.call(t,n))throw Error('Unknown "'+n+'" option');i!==(a=e[n])&&(h=r[n],c[n]=h?h(a,f):a)}return c}function v(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function w(e){var t="value must be type of "+e.join("|"),r=e.length,s=e[0],n=e[1];return 1===r?function(e,r){if(typeof e===s)return e;r(t)}:2===r?function(e,r){var i=typeof e;if(i===s||i===n)return e;r(t)}:function(s,n){for(var i=typeof s,o=r;o-- >0;)if(i===e[o])return s;n(t)}}Object.assign(b.prototype,{subscribe:function(e,t,r){var s=this,n=this._target,i=this._emitter,o=this._listeners,a=function(){var s=m.apply(null,arguments),o={data:s,name:t,original:e};if(r){!1!==r.call(n,o)&&i.emit.apply(i,[o.name].concat(s));return}i.emit.apply(i,[t].concat(s))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,i._newListener&&i._removeListener&&!s._onNewListener?(this._onNewListener=function(r){r===t&&null===o[e]&&(o[e]=a,s._on.call(n,e,a))},i.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===t&&!i.hasListeners(r)&&o[e]&&(o[e]=null,s._off.call(n,e,a))},o[e]=null,i.on("removeListener",this._onRemoveListener)):(o[e]=a,s._on.call(n,e,a))},unsubscribe:function(e){var t,r,s,n=this,i=this._listeners,o=this._emitter,a=this._off,h=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function c(){n._onNewListener&&(o.off("newListener",n._onNewListener),o.off("removeListener",n._onRemoveListener),n._onNewListener=null,n._onRemoveListener=null);var e=A.call(o,n);o._observers.splice(e,1)}if(e){if(!(t=i[e]))return;a.call(h,e,t),delete i[e],--this._listenersCount||c()}else{for(s=(r=f(i)).length;s-- >0;)e=r[s],a.call(h,e,i[e]);this._listeners={},this._listenersCount=0,c()}}});var C=w(["function"]),E=w(["object","function"]);function k(e,t,r){var s,n,i,o=0,a=new e(function(h,c,l){function u(){n&&(n=null),o&&(clearTimeout(o),o=0)}s=!(r=_(r,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}})).overload&&"function"==typeof e.prototype.cancel&&"function"==typeof l;var f=function(e){u(),h(e)},p=function(e){u(),c(e)};s?t(f,p,l):(n=[function(e){p(e||Error("canceled"))}],t(f,p,function(e){if(i)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");n.push(e)}),i=!0),r.timeout>0&&(o=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,a.cancel(e),c(e)},r.timeout))});return s||(a.cancel=function(e){if(n){for(var t=n.length,r=1;r<t;r++)n[r](e);n[0](e),n=null}}),a}function A(e){var t=this._observers;if(!t)return -1;for(var r=t.length,s=0;s<r;s++)if(t[s]._target===e)return s;return -1}function T(e,t,r,s,n){if(!r)return null;if(0===s){var i=typeof t;if("string"===i){var o,a,h=0,c=0,l=this.delimiter,u=l.length;if(-1!==(a=t.indexOf(l))){o=[,,,,,];do o[h++]=t.slice(c,a),c=a+u;while(-1!==(a=t.indexOf(l,c)));o[h++]=t.slice(c),t=o,n=h}else t=[t],n=1}else"object"===i?n=t.length:(t=[t],n=1)}var p,d,y,m,g,b,_,v=null,w=t[s],C=t[s+1];if(s===n)r._listeners&&("function"==typeof r._listeners?(e&&e.push(r._listeners),v=[r]):(e&&e.push.apply(e,r._listeners),v=[r]));else{if("*"===w){for(a=(b=f(r)).length;a-- >0;)"_listeners"!==(p=b[a])&&(_=T(e,t,r[p],s+1,n))&&(v?v.push.apply(v,_):v=_);return v}if("**"===w){for((g=s+1===n||s+2===n&&"*"===C)&&r._listeners&&(v=T(e,t,r,n,n)),a=(b=f(r)).length;a-- >0;)"_listeners"!==(p=b[a])&&("*"===p||"**"===p?(r[p]._listeners&&!g&&(_=T(e,t,r[p],n,n))&&(v?v.push.apply(v,_):v=_),_=T(e,t,r[p],s,n)):_=p===C?T(e,t,r[p],s+2,n):T(e,t,r[p],s,n),_&&(v?v.push.apply(v,_):v=_));return v}r[w]&&(v=T(e,t,r[w],s+1,n))}if((d=r["*"])&&T(e,t,d,s+1,n),y=r["**"]){if(s<n)for(y._listeners&&T(e,t,y,n,n),a=(b=f(y)).length;a-- >0;)"_listeners"!==(p=b[a])&&(p===C?T(e,t,y[p],s+2,n):p===w?T(e,t,y[p],s+1,n):((m={})[p]=y[p],T(e,t,{"**":m},s+1,n)));else y._listeners?T(e,t,y,n,n):y["*"]&&y["*"]._listeners&&T(e,t,y["*"],n,n)}return v}function L(e,t,r){var s,n,i=0,o=0,a=this.delimiter,h=a.length;if("string"==typeof e){if(-1!==(s=e.indexOf(a))){n=[,,,,,];do n[i++]=e.slice(o,s),o=s+h;while(-1!==(s=e.indexOf(a,o)));n[i++]=e.slice(o)}else n=[e],i=1}else n=e,i=e.length;if(i>1){for(s=0;s+1<i;s++)if("**"===n[s]&&"**"===n[s+1])return}var c,l=this.listenerTree;for(s=0;s<i;s++)if(l=l[c=n[s]]||(l[c]={}),s===i-1){l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),r?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,y.call(this,l._listeners.length,c))):l._listeners=t;break}return!0}function O(e,t,r,s){for(var n,i,o,a,h=f(e),c=h.length,l=e._listeners;c-- >0;)n=e[i=h[c]],o="_listeners"===i?r:r?r.concat(i):[i],a=s||"symbol"==typeof i,l&&t.push(a?o:o.join(this.delimiter)),"object"==typeof n&&O.call(this,n,t,o,a);return t}function x(e){for(var t,r,s,n=f(e),i=n.length;i-- >0;)(t=e[r=n[i]])&&(s=!0,"_listeners"===r||x(t)||delete e[r]);return s}function R(e,t,r){this.emitter=e,this.event=t,this.listener=r}function B(e,t,r){if(!0===r)o=!0;else if(!1===r)s=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var s=r.async,o=r.promisify,a=r.nextTick,c=r.objectify}if(s||a||o){var l=t,f=t._origin||t;if(a&&!h)throw Error("process.nextTick is not supported");i===o&&(o="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,r=this.event;return o?a?Promise.resolve():new Promise(function(e){u(e)}).then(function(){return t.event=r,l.apply(t,e)}):(a?n.nextTick:u)(function(){t.event=r,l.apply(t,e)})})._async=!0,t._origin=f}return[t,c?new R(this,e,t):this]}function F(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,e)}R.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},F.EventEmitter2=F,F.prototype.listenTo=function(e,t,r){if("object"!=typeof e)throw TypeError("target musts be an object");var s=this;return r=_(r,{on:i,off:i,reducers:i},{on:C,off:C,reducers:E}),function(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,i,o=r.reducers,a=A.call(s,e);n=-1===a?new b(s,e,r):s._observers[a];for(var h=f(t),c=h.length,l="function"==typeof o,u=0;u<c;u++)i=h[u],n.subscribe(i,t[i]||i,l?o:o&&o[i])}(a(t)?g(t):"string"==typeof t?g(t.split(/\s+/)):t),this},F.prototype.stopListeningTo=function(e,t){var r,s=this._observers;if(!s)return!1;var n=s.length,i=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;n-- >0;)r=s[n],e&&r._target!==e||(r.unsubscribe(t),i=!0);return i},F.prototype.delimiter=".",F.prototype.setMaxListeners=function(e){i!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},F.prototype.getMaxListeners=function(){return this._maxListeners},F.prototype.event="",F.prototype.once=function(e,t,r){return this._once(e,t,!1,r)},F.prototype.prependOnceListener=function(e,t,r){return this._once(e,t,!0,r)},F.prototype._once=function(e,t,r,s){return this._many(e,1,t,r,s)},F.prototype.many=function(e,t,r,s){return this._many(e,t,r,!1,s)},F.prototype.prependMany=function(e,t,r,s){return this._many(e,t,r,!0,s)},F.prototype._many=function(e,t,r,s,n){var i=this;if("function"!=typeof r)throw Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),r.apply(this,arguments)}return o._origin=r,this._on(e,o,s,n)},F.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,r,s,n,i,o,a=arguments[0],h=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(h&&(o=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(t=a.length,c){for(r=0;r<t;r++)if("symbol"==typeof a[r]){n=!0;break}}n||(a=a.join(this.delimiter))}var l=arguments.length;if(this._all&&this._all.length)for(r=0,t=(i=this._all.slice()).length;r<t;r++)switch(this.event=a,l){case 1:i[r].call(this,a);break;case 2:i[r].call(this,a,arguments[1]);break;case 3:i[r].call(this,a,arguments[1],arguments[2]);break;default:i[r].apply(this,arguments)}if(h)i=[],T.call(this,i,o,this.listenerTree,0,t);else{if("function"==typeof(i=this._events[a])){switch(this.event=a,l){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(s=1,e=Array(l-1);s<l;s++)e[s-1]=arguments[s];i.apply(this,e)}return!0}i&&(i=i.slice())}if(i&&i.length){if(l>3)for(s=1,e=Array(l-1);s<l;s++)e[s-1]=arguments[s];for(r=0,t=i.length;r<t;r++)switch(this.event=a,l){case 1:i[r].call(this);break;case 2:i[r].call(this,arguments[1]);break;case 3:i[r].call(this,arguments[1],arguments[2]);break;default:i[r].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.")}return!!this._all},F.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,r,s,n,i,o,a=arguments[0],h=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(h&&(i=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(t=a.length,c){for(r=0;r<t;r++)if("symbol"==typeof a[r]){o=!0;break}}o||(a=a.join(this.delimiter))}var l=[],u=arguments.length;if(this._all)for(r=0,t=this._all.length;r<t;r++)switch(this.event=a,u){case 1:l.push(this._all[r].call(this,a));break;case 2:l.push(this._all[r].call(this,a,arguments[1]));break;case 3:l.push(this._all[r].call(this,a,arguments[1],arguments[2]));break;default:l.push(this._all[r].apply(this,arguments))}if(h?(n=[],T.call(this,n,i,this.listenerTree,0)):n=this._events[a],"function"==typeof n)switch(this.event=a,u){case 1:l.push(n.call(this));break;case 2:l.push(n.call(this,arguments[1]));break;case 3:l.push(n.call(this,arguments[1],arguments[2]));break;default:for(s=1,e=Array(u-1);s<u;s++)e[s-1]=arguments[s];l.push(n.apply(this,e))}else if(n&&n.length){if(n=n.slice(),u>3)for(s=1,e=Array(u-1);s<u;s++)e[s-1]=arguments[s];for(r=0,t=n.length;r<t;r++)switch(this.event=a,u){case 1:l.push(n[r].call(this));break;case 2:l.push(n[r].call(this,arguments[1]));break;case 3:l.push(n[r].call(this,arguments[1],arguments[2]));break;default:l.push(n[r].apply(this,e))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},F.prototype.on=function(e,t,r){return this._on(e,t,!1,r)},F.prototype.prependListener=function(e,t,r){return this._on(e,t,!0,r)},F.prototype.onAny=function(e){return this._onAny(e,!1)},F.prototype.prependAny=function(e){return this._onAny(e,!0)},F.prototype.addListener=F.prototype.on,F.prototype._onAny=function(e,t){if("function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},F.prototype._on=function(e,t,r,s){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw Error("on only accepts instances of Function");this._events||p.call(this);var n,o=this;return(i!==s&&(t=(n=B.call(this,e,t,s))[0],o=n[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard)?(L.call(this,e,t,r),o):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,y.call(this,this._events[e].length,e))):this._events[e]=t,o)},F.prototype.off=function(e,t){if("function"!=typeof t)throw Error("removeListener only takes instances of Function");var r,s=[];if(this.wildcard){var n="string"==typeof e?e.split(this.delimiter):e.slice();if(!(s=T.call(this,null,n,this.listenerTree,0)))return this}else{if(!this._events[e])return this;r=this._events[e],s.push({_listeners:r})}for(var i=0;i<s.length;i++){var o=s[i];if(a(r=o._listeners)){for(var h=-1,c=0,l=r.length;c<l;c++)if(r[c]===t||r[c].listener&&r[c].listener===t||r[c]._origin&&r[c]._origin===t){h=c;break}if(h<0)continue;return this.wildcard?o._listeners.splice(h,1):this._events[e].splice(h,1),0===r.length&&(this.wildcard?delete o._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete o._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&x(this.listenerTree),this},F.prototype.offAny=function(e){var t,r=0,s=0;if(e&&this._all&&this._all.length>0){for(r=0,s=(t=this._all).length;r<s;r++)if(e===t[r]){t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e);break}}else{if(t=this._all,this._removeListener)for(r=0,s=t.length;r<s;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},F.prototype.removeListener=F.prototype.off,F.prototype.removeAllListeners=function(e){if(i===e)return this._events&&p.call(this),this;if(this.wildcard){var t,r=T.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&x(this.listenerTree)}else this._events&&(this._events[e]=null);return this},F.prototype.listeners=function(e){var t,r,s,n,o,a=this._events;if(i===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(n=(t=f(a)).length,s=[];n-- >0;)"function"==typeof(r=a[t[n]])?s.push(r):s.push.apply(s,r);return s}if(this.wildcard){if(!(o=this.listenerTree))return[];var h=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return T.call(this,h,c,o,0),h}return a&&(r=a[e])?"function"==typeof r?[r]:r:[]},F.prototype.eventNames=function(e){var t=this._events;return this.wildcard?O.call(this,this.listenerTree,[],null,e):t?f(t):[]},F.prototype.listenerCount=function(e){return this.listeners(e).length},F.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return T.call(this,t,r,this.listenerTree,0),t.length>0}var s=this._events,n=this._all;return!!(n&&n.length||s&&(i===e?f(s).length:s[e]))},F.prototype.listenersAny=function(){return this._all?this._all:[]},F.prototype.waitFor=function(e,t){var r=this,s=typeof t;return"number"===s?t={timeout:t}:"function"===s&&(t={filter:t}),k((t=_(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:C,Promise:v})).Promise,function(s,n,i){function o(){var i=t.filter;if(!i||i.apply(r,arguments)){if(r.off(e,o),t.handleError){var a=arguments[0];a?n(a):s(m.apply(null,arguments).slice(1))}else s(m.apply(null,arguments))}}i(function(){r.off(e,o)}),r._on(e,o,!1)},{timeout:t.timeout,overload:t.overload})};var S=F.prototype;Object.defineProperties(F,{defaultMaxListeners:{get:function(){return S._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");S._maxListeners=e},enumerable:!0},once:{value:function(e,t,r){return k((r=_(r,{Promise:Promise,timeout:0,overload:!1},{Promise:v})).Promise,function(r,s,n){if("function"==typeof e.addEventListener){i=function(){r(m.apply(null,arguments))},n(function(){e.removeEventListener(t,i)}),e.addEventListener(t,i,{once:!0});return}var i,o,a=function(){o&&e.removeListener("error",o),r(m.apply(null,arguments))};"error"!==t&&(o=function(r){e.removeListener(t,a),s(r)},e.once("error",o)),n(function(){o&&e.removeListener("error",o),e.removeListener(t,a)}),e.once(t,a)},{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(S,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),s=(function(){return F}).call(t,r,t,e),i!==s&&(e.exports=s)}()},11378:function(e){function t(e,t,r,s){return Math.round(e/r)+" "+s+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var s,n,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===i&&isFinite(e))return r.long?(s=Math.abs(e))>=864e5?t(e,s,864e5,"day"):s>=36e5?t(e,s,36e5,"hour"):s>=6e4?t(e,s,6e4,"minute"):s>=1e3?t(e,s,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},71645:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s,n=new Uint8Array(16);function i(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(n)}for(var o=r(48738),a=[],h=0;h<256;++h)a.push((h+256).toString(16).substr(1));var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!(0,o.Z)(r))throw TypeError("Stringified UUID is invalid");return r},l=function(e,t,r){var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=s[n];return t}return c(s)}},48738:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,n=function(e){return"string"==typeof e&&s.test(e)}},91184:function(e,t,r){"use strict";let s,n;r.d(t,{io:function(){return eE}});var i,o,a={};r.r(a),r.d(a,{Decoder:function(){return ey},Encoder:function(){return ep},PacketType:function(){return o},protocol:function(){return ef}});let h=Object.create(null);h.open="0",h.close="1",h.ping="2",h.pong="3",h.message="4",h.upgrade="5",h.noop="6";let c=Object.create(null);Object.keys(h).forEach(e=>{c[h[e]]=e});let l={type:"error",data:"parser error"},u="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),f="function"==typeof ArrayBuffer,p=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,d=({type:e,data:t},r,s)=>u&&t instanceof Blob?r?s(t):y(t,s):f&&(t instanceof ArrayBuffer||p(t))?r?s(t):y(new Blob([t]),s):s(h[e]+(t||"")),y=(e,t)=>{let r=new FileReader;return r.onload=function(){let e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function m(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<g.length;e++)b[g.charCodeAt(e)]=e;let _=e=>{let t=.75*e.length,r=e.length,s,n=0,i,o,a,h;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),l=new Uint8Array(c);for(s=0;s<r;s+=4)i=b[e.charCodeAt(s)],o=b[e.charCodeAt(s+1)],a=b[e.charCodeAt(s+2)],h=b[e.charCodeAt(s+3)],l[n++]=i<<2|o>>4,l[n++]=(15&o)<<4|a>>2,l[n++]=(3&a)<<6|63&h;return c},v="function"==typeof ArrayBuffer,w=(e,t)=>{if("string"!=typeof e)return{type:"message",data:E(e,t)};let r=e.charAt(0);if("b"===r)return{type:"message",data:C(e.substring(1),t)};let s=c[r];return s?e.length>1?{type:c[r],data:e.substring(1)}:{type:c[r]}:l},C=(e,t)=>{if(!v)return{base64:!0,data:e};{let r=_(e);return E(r,t)}},E=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,k=(e,t)=>{let r=e.length,s=Array(r),n=0;e.forEach((e,i)=>{d(e,!1,e=>{s[i]=e,++n===r&&t(s.join("\x1e"))})})},A=(e,t)=>{let r=e.split("\x1e"),s=[];for(let e=0;e<r.length;e++){let n=w(r[e],t);if(s.push(n),"error"===n.type)break}return s};function T(e){return e.reduce((e,t)=>e+t.length,0)}function L(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),s=0;for(let n=0;n<t;n++)r[n]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function O(e){if(e)return function(e){for(var t in O.prototype)e[t]=O.prototype[t];return e}(e)}O.prototype.on=O.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},O.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},O.prototype.off=O.prototype.removeListener=O.prototype.removeAllListeners=O.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((r=s[n])===t||r.fn===t){s.splice(n,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},O.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,n=r.length;s<n;++s)r[s].apply(this,t)}return this},O.prototype.emitReserved=O.prototype.emit,O.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},O.prototype.hasListeners=function(e){return!!this.listeners(e).length};let x=(()=>{let e="function"==typeof Promise&&"function"==typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),R="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function B(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let F=R.setTimeout,S=R.clearTimeout;function j(e,t){t.useNativeTimers?(e.setTimeoutFn=F.bind(R),e.clearTimeoutFn=S.bind(R)):(e.setTimeoutFn=R.setTimeout.bind(R),e.clearTimeoutFn=R.clearTimeout.bind(R))}function P(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class N extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class D extends O{constructor(e){super(),this.writable=!1,j(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new N(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=w(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class U extends D{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};A(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,k(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=P()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let q=!1;try{q="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let I=q;function M(){}class H extends U{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class V extends O{constructor(e,t,r){super(),this.createRequest=e,j(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=B(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=V.requestsCount++,V.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=M,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete V.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function W(){for(let e in V.requests)V.requests.hasOwnProperty(e)&&V.requests[e].abort()}V.requestsCount=0,V.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",W):"function"==typeof addEventListener&&addEventListener("onpagehide"in R?"pagehide":"unload",W,!1));let z=function(){let e=K({xdomain:!1});return e&&null!==e.responseType}();function K(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||I))return new XMLHttpRequest}catch(e){}if(!t)try{return new R[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let Y="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class J extends D{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=Y?{}:B(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;d(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){}s&&x(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=P()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let $=R.WebSocket||R.MozWebSocket,X={websocket:class extends J{createSocket(e,t,r){return Y?new $(e,t,r):t?new $(e,t):new $(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends D{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){n||(n=new TextDecoder);let r=[],s=0,i=-1,o=!1;return new TransformStream({transform(a,h){for(r.push(a);;){if(0===s){if(1>T(r))break;let e=L(r,1);o=(128&e[0])==128,s=(i=127&e[0])<126?3:126===i?1:2}else if(1===s){if(2>T(r))break;let e=L(r,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(8>T(r))break;let e=L(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){h.enqueue(l);break}i=4294967296*n+t.getUint32(4),s=3}else{if(T(r)<i)break;let e=L(r,i);h.enqueue(w(o?e:n.decode(e),t)),s=0}if(0===i||i>e){h.enqueue(l);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=new TransformStream({transform(e,t){var r;r=r=>{let s;let n=r.length;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);let e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,n)}else{s=new Uint8Array(9);let e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(r)},u&&e.data instanceof Blob?e.data.arrayBuffer().then(m).then(r):f&&(e.data instanceof ArrayBuffer||p(e.data))?r(m(e.data)):d(e,!1,e=>{s||(s=new TextEncoder),r(s.encode(e))})}});i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();let o=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),o())}).catch(e=>{})};o();let a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&x(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends H{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=z&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new V(K,this.uri(),e)}}},G=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Q=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Z(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let n=G.exec(e||""),i={},o=14;for(;o--;)i[Q[o]]=n[o]||"";return -1!=r&&-1!=s&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(r[t]=s)}),r}(0,i.query),i}let ee="function"==typeof addEventListener&&"function"==typeof removeEventListener,et=[];ee&&addEventListener("offline",()=>{et.forEach(e=>e())},!1);class er extends O{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=Z(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=Z(t.host).host);j(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,s=r.length;e<s;e++){let s=r[e].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(this.opts.query)),ee&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},et.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&er.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",er.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){let e=this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){let r=this.writeBuffer[e].data;if(r&&(t+="string"==typeof r?function(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++)(t=e.charCodeAt(s))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),e>0&&t>this._maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,x(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(er.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ee&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=et.indexOf(this._offlineEventListener);-1!==e&&et.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}er.protocol=4;class es extends er{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;er.priorWebsocketSuccess=!1;let s=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r){if("pong"===e.type&&"probe"===e.data)this.upgrading=!0,this.emitReserved("upgrading",t),t&&(er.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"===this.readyState||(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}}))};function n(){r||(r=!0,c(),t.close(),t=null)}let i=e=>{let r=Error("probe error: "+e);r.transport=t.name,n(),this.emitReserved("upgradeError",r)};function o(){i("transport closed")}function a(){i("socket closed")}function h(e){t&&e.name!==t.name&&n()}let c=()=>{t.removeListener("open",s),t.removeListener("error",i),t.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};t.once("open",s),t.once("error",i),t.once("close",o),this.once("close",a),this.once("upgrading",h),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class en extends es{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>X[e]).filter(e=>!!e)),super(e,r)}}en.protocol;let ei="function"==typeof ArrayBuffer,eo=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ea=Object.prototype.toString,eh="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ea.call(Blob),ec="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ea.call(File);function el(e){return ei&&(e instanceof ArrayBuffer||eo(e))||eh&&e instanceof Blob||ec&&e instanceof File}let eu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ef=5;(i=o||(o={}))[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK";class ep{constructor(e){this.replacer=e}encode(e){return(e.type===o.EVENT||e.type===o.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(e(t[r]))return!0;return!1}if(el(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===o.BINARY_EVENT||e.type===o.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data,s=e;return s.data=function e(t,r){if(!t)return t;if(el(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let s=Array(t.length);for(let n=0;n<t.length;n++)s[n]=e(t[n],r);return s}if("object"==typeof t&&!(t instanceof Date)){let s={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=e(t[n],r));return s}return t}(r,t),s.attachments=t.length,{packet:s,buffers:t}}(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function ed(e){return"[object Object]"===Object.prototype.toString.call(e)}class ey extends O{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let r=t.type===o.BINARY_EVENT;r||t.type===o.BINARY_ACK?(t.type=r?o.EVENT:o.ACK,this.reconstructor=new em(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(el(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===o[r.type])throw Error("unknown packet type "+r.type);if(r.type===o.BINARY_EVENT||r.type===o.BINARY_ACK){let s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let n=e.substring(s,t);if(n!=Number(n)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){let s=t+1;for(;++t;){let r=e.charAt(t);if(","===r||t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";let s=e.charAt(t+1);if(""!==s&&Number(s)==s){let s=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){let s=this.tryParse(e.substr(t));if(ey.isPayloadValid(r.type,s))r.data=s;else throw Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case o.CONNECT:return ed(t);case o.DISCONNECT:return void 0===t;case o.CONNECT_ERROR:return"string"==typeof t||ed(t);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===eu.indexOf(t[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class em{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){let e="number"==typeof t.num&&t.num>=0&&t.num<r.length;if(e)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=e(t[s],r);else if("object"==typeof t)for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e(t[s],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function eg(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let eb=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e_ extends O{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[eg(e,"open",this.onopen.bind(this)),eg(e,"packet",this.onpacket.bind(this)),eg(e,"error",this.onerror.bind(this)),eg(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,n;if(eb.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let i={type:o.EVENT,data:t};if(i.options={},i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,r=t.pop();this._registerAckCallback(e,r),i.id=e}let a=null===(s=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===s?void 0:s.writable,h=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired()),c=this.flags.volatile&&!a;return c||(h?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var r;let s=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===s){this.acks[e]=t;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},s),i=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((r,s)=>{let n=(e,t)=>e?s(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...s)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{let t=this.sendBuffer.some(t=>String(t.id)===e);if(!t){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){let t=e.nsp===this.nsp;if(t)switch(e.type){case o.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let r=Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...s){r||(r=!0,t.packet({type:o.ACK,id:e,data:s}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:o.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let r of t)r.apply(this,e.data)}}}function ev(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ev.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},ev.prototype.reset=function(){this.attempts=0},ev.prototype.setMin=function(e){this.ms=e},ev.prototype.setMax=function(e){this.max=e},ev.prototype.setJitter=function(e){this.jitter=e};class ew extends O{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,j(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new ev({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let s=t.parser||a;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new en(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=eg(t,"open",function(){r.onopen(),e&&e()}),n=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=eg(t,"error",n);if(!1!==this._timeout){let e=this._timeout,r=this.setTimeoutFn(()=>{s(),n(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(eg(e,"ping",this.onping.bind(this)),eg(e,"data",this.ondata.bind(this)),eg(e,"error",this.onerror.bind(this)),eg(e,"close",this.onclose.bind(this)),eg(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){x(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new e_(this,e,t),this.nsps[e]=r),r}_destroy(e){let t=Object.keys(this.nsps);for(let e of t){let t=this.nsps[e];if(t.active)return}this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let eC={};function eE(e,t){let r;"object"==typeof e&&(t=e,e=void 0),t=t||{};let s=function(e,t="",r){let s=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),s=Z(e)),!s.port&&(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let n=-1!==s.host.indexOf(":"),i=n?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(r&&r.port===s.port?"":":"+s.port),s}(e,t.path||"/socket.io"),n=s.source,i=s.id,o=s.path,a=eC[i]&&o in eC[i].nsps,h=t.forceNew||t["force new connection"]||!1===t.multiplex||a;return h?r=new ew(n,t):(eC[i]||(eC[i]=new ew(n,t)),r=eC[i]),s.query&&!t.query&&(t.query=s.queryKey),r.socket(s.path,t)}Object.assign(eE,{Manager:ew,Socket:e_,io:eE,connect:eE})}}]);