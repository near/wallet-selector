"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1563],{52888:function(e,t,r){r.d(t,{q:function(){return f}});var n=r(1241),s=r(88518),a=r(1491),o=r(56940),i=r(66645),c=r(13170),u=r(82419),l=r(41474),h=r(54875),d=r(76182);function f(e){let t;let r=new Map,w=e.features??{defaultConnected:!1},p=w.defaultConnected;return(0,d.K)(d=>({id:"mock",name:"Mock Connector",type:f.type,async setup(){t=d.chains[0].id},async connect({chainId:e}={}){if(w.connectError){if("boolean"==typeof w.connectError)throw new n.ab(Error("Failed to connect."));throw w.connectError}let t=await this.getProvider(),r=await t.request({method:"eth_requestAccounts"}),a=await this.getChainId();if(e&&a!==e){let t=await this.switchChain({chainId:e});a=t.id}return p=!0,{accounts:r.map(e=>(0,s.K)(e)),chainId:a}},async disconnect(){p=!1},async getAccounts(){if(!p)throw new h.aH;let e=await this.getProvider(),t=await e.request({method:"eth_accounts"});return t.map(e=>(0,s.K)(e))},async getChainId(){let e=await this.getProvider(),t=await e.request({method:"eth_chainId"});return(0,a.H_)(t,"number")},async isAuthorized(){if(!w.reconnect||!p)return!1;let e=await this.getAccounts();return!!e.length},async switchChain({chainId:e}){let t=await this.getProvider(),r=d.chains.find(t=>t.id===e);if(!r)throw new n.x3(new h.X4);return await t.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,o.eC)(e)}]}),r},onAccountsChanged(e){0===e.length?this.onDisconnect():d.emitter.emit("change",{accounts:e.map(e=>(0,s.K)(e))})},onChainChanged(e){let t=Number(e);d.emitter.emit("change",{chainId:t})},async onDisconnect(e){d.emitter.emit("disconnect"),p=!1},async getProvider({chainId:s}={}){let h=d.chains.find(e=>e.id===s)??d.chains[0],f=h.rpcUrls.default.http[0],y=async({method:s,params:u})=>{if("eth_chainId"===s)return(0,o.eC)(t);if("eth_requestAccounts"===s)return e.accounts;if("eth_signTypedData_v4"===s&&w.signTypedDataError){if("boolean"==typeof w.signTypedDataError)throw new n.ab(Error("Failed to sign typed data."));throw w.signTypedDataError}if("wallet_switchEthereumChain"===s){if(w.switchChainError){if("boolean"==typeof w.switchChainError)throw new n.ab(Error("Failed to switch chain."));throw w.switchChainError}t=(0,a.H_)(u[0].chainId,"number"),this.onChainChanged(t.toString());return}if("wallet_watchAsset"===s){if(w.watchAssetError){if("boolean"==typeof w.watchAssetError)throw new n.ab(Error("Failed to switch chain."));throw w.watchAssetError}return p}if("wallet_getCapabilities"===s)return{"0x2105":{paymasterService:{supported:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"===u[0]},sessionKeys:{supported:!0}},"0x14A34":{paymasterService:{supported:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"===u[0]}}};if("wallet_sendCalls"===s){let e=[],t=u[0].calls;for(let r of t){let{result:t,error:n}=await l.f.http(f,{body:{method:"eth_sendTransaction",params:[r]}});if(n)throw new i.bs({body:{method:s,params:u},error:n,url:f});e.push(t)}let n=(0,c.w)((0,o.$G)(JSON.stringify(t)));return r.set(n,e),{id:n}}if("wallet_getCallsStatus"===s){let e=r.get(u[0]);if(!e)return{atomic:!1,chainId:"0x1",id:u[0],status:100,receipts:[],version:"2.0.0"};let t=await Promise.all(e.map(async e=>{let{result:t,error:r}=await l.f.http(f,{body:{method:"eth_getTransactionReceipt",params:[e],id:0}});if(r)throw new i.bs({body:{method:s,params:u},error:r,url:f});return t?{blockHash:t.blockHash,blockNumber:t.blockNumber,gasUsed:t.gasUsed,logs:t.logs,status:t.status,transactionHash:t.transactionHash}:null})),n=t.filter(e=>null!==e);return 0===n.length?{atomic:!1,chainId:"0x1",id:u[0],status:100,receipts:[],version:"2.0.0"}:{atomic:!1,chainId:"0x1",id:u[0],status:200,receipts:n,version:"2.0.0"}}if("wallet_showCallsStatus"===s)return;if("personal_sign"===s){if(w.signMessageError){if("boolean"==typeof w.signMessageError)throw new n.ab(Error("Failed to sign message."));throw w.signMessageError}s="eth_sign",u=[u[1],u[0]]}let h={method:s,params:u},{error:d,result:y}=await l.f.http(f,{body:h});if(d)throw new i.bs({body:h,error:d,url:f});return y};return(0,u.P)({request:y})({retryCount:0})}}))}f.type="mock"},41474:function(e,t,r){r.d(t,{f:function(){return i},h:function(){return o}});var n=r(5577),s=r(72790);async function a(e,{body:t,timeout:r=1e4}){return e.requestAsync({body:t,timeout:r})}async function o(e){let t=await (0,s.H)(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}let i={http:(e,t)=>(0,n.x)(e).request(t),webSocket:function(e,{body:t,onError:r,onResponse:n}){return e.request({body:t,onError:r,onResponse:n}),e},webSocketAsync:a}},72790:function(e,t,r){r.d(t,{H:function(){return u}});var n=r(66645),s=r(5549),a=r(21405),o=r(74754);let i=new Map;async function c(e){let{getSocket:t,keepAlive:r=!0,key:c="socket",reconnect:u=!0,url:l}=e,{interval:h=3e4}="object"==typeof r?r:{},{attempts:d=5,delay:f=2e3}="object"==typeof u?u:{},w=JSON.stringify({keepAlive:r,key:c,url:l,reconnect:u}),p=i.get(w);if(p)return p;let y=0,{schedule:g}=(0,s.S)({id:w,fn:async()=>{let e,s,c;let g=new Map,m=new Map,b=!1;function E(){u&&y<d?b||(b=!0,y++,s?.close(),setTimeout(async()=>{await v().catch(console.error),b=!1},f)):(g.clear(),m.clear())}async function v(){let a=await t({onClose(){for(let e of g.values())e.onError?.(new n.Cc({url:l}));for(let e of m.values())e.onError?.(new n.Cc({url:l}));E()},onError(t){for(let r of(e=t,g.values()))r.onError?.(e);for(let t of m.values())t.onError?.(e);E()},onOpen(){e=void 0,y=0},onResponse(e){let t="eth_subscription"===e.method,r=t?e.params.subscription:e.id,n=t?m:g,s=n.get(r);s&&s.onResponse(e),t||n.delete(r)}});if(s=a,r&&(c&&clearInterval(c),c=setInterval(()=>s.ping?.(),h)),u&&m.size>0){let e=m.entries();for(let[t,{onResponse:r,body:n,onError:s}]of e)n&&(m.delete(t),p?.request({body:n,onResponse:r,onError:s}))}return a}return await v(),e=void 0,p={close(){c&&clearInterval(c),s.close(),i.delete(w)},get socket(){return s},request({body:t,onError:r,onResponse:n}){e&&r&&r(e);let a=t.id??o.d.take(),i=e=>{("number"!=typeof e.id||a===e.id)&&("eth_subscribe"===t.method&&"string"==typeof e.result&&m.set(e.result,{onResponse:i,onError:r,body:t}),"eth_unsubscribe"===t.method&&m.delete(t.params?.[0]),n(e))};g.set(a,{onResponse:i,onError:r});try{s.request({body:{jsonrpc:"2.0",id:a,...t}})}catch(e){r?.(e)}},requestAsync({body:e,timeout:t=1e4}){return(0,a.F)(()=>new Promise((t,r)=>this.request({body:e,onError:r,onResponse:t})),{errorInstance:new n.W5({body:e,url:l}),timeout:t})},requests:g,subscriptions:m,url:l},i.set(w,p),[p]}}),[m,[b]]=await g();return b}async function u(e,t={}){let{keepAlive:s,reconnect:a}=t;return c({async getSocket({onClose:t,onError:s,onOpen:a,onResponse:o}){let i=await r.e(5090).then(r.bind(r,65090)).then(e=>e.WebSocket),c=new i(e);function u(){c.removeEventListener("close",u),c.removeEventListener("message",l),c.removeEventListener("error",s),c.removeEventListener("open",a),t()}function l({data:e}){try{let t=JSON.parse(e);o(t)}catch(e){s(e)}}c.addEventListener("close",u),c.addEventListener("message",l),c.addEventListener("error",s),c.addEventListener("open",a),c.readyState===i.CONNECTING&&await new Promise((e,t)=>{c&&(c.onopen=e,c.onerror=t)});let{close:h}=c;return Object.assign(c,{close(){h.bind(c)(),u()},ping(){try{if(c.readyState===c.CLOSED||c.readyState===c.CLOSING)throw new n.c9({url:c.url,cause:new n.Cc({url:c.url})});c.send(JSON.stringify({jsonrpc:"2.0",method:"net_version",params:[]}))}catch(e){s(e)}},request({body:e}){if(c.readyState===c.CLOSED||c.readyState===c.CLOSING)throw new n.c9({body:e,url:c.url,cause:new n.Cc({url:c.url})});return c.send(JSON.stringify(e))}})},keepAlive:s,reconnect:a,url:e})}}}]);